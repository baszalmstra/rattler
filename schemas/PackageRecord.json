{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PackageRecord",
  "description": "A single record in the Conda repodata. A single record refers to a single binary distribution of a package on a Conda channel.",
  "type": "object",
  "required": [
    "build",
    "build_number",
    "name",
    "noarch",
    "version"
  ],
  "properties": {
    "arch": {
      "description": "Optionally the architecture the package supports. This is almost always the second part of the `subdir` string. Except for `64` which maps to `x86_64` and `32` which maps to `x86`. This will be `None` if the package is `noarch`.",
      "type": "string"
    },
    "build": {
      "description": "The build string of the package",
      "type": "string"
    },
    "build_number": {
      "description": "The build number of the package",
      "type": "integer",
      "format": "uint64",
      "minimum": 0.0
    },
    "constrains": {
      "description": "Additional constraints on packages. `constrains` are different from `depends` in that packages specified in `depends` must be installed next to this package, whereas packages specified in `constrains` are not required to be installed, but if they are installed they must follow these constraints.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "depends": {
      "description": "Specification of packages this package depends on",
      "default": [],
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "extra_depends": {
      "description": "Specifications of optional or dependencies. These are dependencies that are only required if certain features are enabled or if certain conditions are met.",
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    },
    "features": {
      "description": "Features are a deprecated way to specify different feature sets for the conda solver. This is not supported anymore and should not be used. Instead, `mutex` packages should be used to specify mutually exclusive features.",
      "type": "string"
    },
    "legacy_bz2_md5": {
      "description": "A deprecated md5 hash",
      "allOf": [
        {
          "$ref": "#/definitions/Md5Hash"
        }
      ]
    },
    "legacy_bz2_size": {
      "description": "A deprecated package archive size.",
      "type": "integer",
      "format": "uint64",
      "minimum": 0.0
    },
    "license": {
      "description": "The specific license of the package",
      "type": "string"
    },
    "license_family": {
      "description": "The license family",
      "type": "string"
    },
    "md5": {
      "description": "Optionally a MD5 hash of the package archive",
      "allOf": [
        {
          "$ref": "#/definitions/Md5Hash"
        }
      ]
    },
    "name": {
      "description": "The name of the package",
      "allOf": [
        {
          "$ref": "#/definitions/PackageName"
        }
      ]
    },
    "noarch": {
      "description": "If this package is independent of architecture this field specifies in what way. See [`NoArchType`] for more information.",
      "allOf": [
        {
          "$ref": "#/definitions/NoArchType"
        }
      ]
    },
    "platform": {
      "description": "Optionally the platform the package supports. Note that this does not match the [`Platform`] enum, but is only the first part of the platform (e.g. `linux`, `osx`, `win`, ...). The `subdir` field contains the `Platform` enum.",
      "type": "string"
    },
    "purls": {
      "description": "Package identifiers of packages that are equivalent to this package but from other ecosystems. starting from 0.23.2, this field became [`Option<Vec<PackageUrl>>`]. This was done to support older lockfiles, where we didn't differentiate between empty purl and missing one. Now, None:: means that the purl is missing, and it will be tried to filled in. So later it can be one of the following: [`Some(vec![])`] means that the purl is empty and package is not pypi one. [`Some([`PackageUrl`])`] means that it is a pypi package. See this CEP: <https://github.com/conda/ceps/pull/63>",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "python_site_packages_path": {
      "description": "Optionally a path within the environment of the site-packages directory. This field is only present for python interpreter packages. This field was introduced with <https://github.com/conda/ceps/blob/main/cep-17.md>.",
      "type": "string"
    },
    "run_exports": {
      "description": "Run exports that are specified in the package.",
      "allOf": [
        {
          "$ref": "#/definitions/RunExportsJson"
        }
      ]
    },
    "sha256": {
      "description": "Optionally a SHA256 hash of the package archive",
      "allOf": [
        {
          "$ref": "#/definitions/Sha256Hash"
        }
      ]
    },
    "size": {
      "description": "Optionally the size of the package archive in bytes",
      "type": "integer",
      "format": "uint64",
      "minimum": 0.0
    },
    "subdir": {
      "description": "The subdirectory where the package can be found",
      "default": "",
      "type": "string"
    },
    "timestamp": {
      "description": "The date this entry was created.",
      "allOf": [
        {
          "$ref": "#/definitions/TimestampMs"
        }
      ]
    },
    "track_features": {
      "description": "Track features are nowadays only used to downweight packages (ie. give them less priority). To that effect, the package is downweighted by the number of track_features.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "version": {
      "description": "The version of the package",
      "allOf": [
        {
          "$ref": "#/definitions/Version"
        }
      ]
    }
  },
  "definitions": {
    "Md5Hash": {
      "type": "string",
      "maxLength": 32,
      "minLength": 32,
      "pattern": "^[0-9a-f]{32}$"
    },
    "NoArchType": {
      "oneOf": [
        {
          "type": "boolean"
        },
        {
          "type": "string",
          "enum": [
            "generic",
            "python"
          ]
        }
      ]
    },
    "PackageName": {
      "type": "string",
      "minLength": 1,
      "pattern": "^[a-zA-Z0-9._-]+$"
    },
    "RunExportsJson": {
      "description": "A representation of the `run_exports.json` file found in package archives.\n\nThe `run_exports.json` file contains information about the run exports of a package",
      "type": "object",
      "properties": {
        "noarch": {
          "description": "noarch run exports apply a run export only to noarch packages (other run exports are ignored) for example, python uses this to apply a dependency on python to all noarch packages, but not to the python_abi package",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "strong": {
          "description": "strong run exports apply a dependency from build to host and run",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "strong_constrains": {
          "description": "strong constrains apply a constrain dependency from build to host and run",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "weak": {
          "description": "weak run exports apply a dependency from host to run",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "weak_constrains": {
          "description": "weak constrains apply a constrain dependency from host to build, or run to host",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Sha256Hash": {
      "type": "string",
      "maxLength": 64,
      "minLength": 64,
      "pattern": "^[0-9a-f]{64}$"
    },
    "TimestampMs": {
      "type": "integer"
    },
    "Version": {
      "type": "string",
      "minLength": 1
    }
  }
}
